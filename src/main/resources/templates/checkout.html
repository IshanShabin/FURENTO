<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{layout :: head('Checkout')}"></head>

<body>
    <div th:replace="~{layout :: navbar}"></div>

    <div class="container my-5">
        <h2 class="mb-4">Checkout</h2>

        <div class="row">
            <div class="col-md-8">
                <form th:action="@{/cart/process-checkout}" method="post" id="checkoutForm">
                    <!-- Delivery Address -->
                    <div class="card mb-4">
                        <div class="card-header bg-white fw-bold">
                            <i class="fas fa-map-marker-alt text-primary me-2"></i>Delivery Address
                        </div>
                        <div class="card-body">
                            <div class="row g-3">
                                <div class="col-12">
                                    <label for="addressLine1" class="form-label">Address Line 1</label>
                                    <input type="text" class="form-control" id="addressLine1" name="addressLine1"
                                        required>
                                </div>
                                <div class="col-12">
                                    <label for="addressLine2" class="form-label">Address Line 2 (Optional)</label>
                                    <input type="text" class="form-control" id="addressLine2" name="addressLine2">
                                </div>
                                <div class="col-md-6">
                                    <label for="city" class="form-label">City</label>
                                    <input type="text" class="form-control" id="city" name="city" required>
                                </div>
                                <div class="col-md-4">
                                    <label for="state" class="form-label">State</label>
                                    <select class="form-select" id="state" name="state" required>
                                        <option value="">Choose...</option>
                                        <option>Delhi</option>
                                        <option>Maharashtra</option>
                                        <option>Karnataka</option>
                                        <option>Tamil Nadu</option>
                                        <!-- Add more states -->
                                    </select>
                                </div>
                                <div class="col-md-2">
                                    <label for="zipCode" class="form-label">Zip</label>
                                    <input type="text" class="form-control" id="zipCode" name="zipCode" required>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Payment Method -->
                    <div class="card mb-4">
                        <div class="card-header bg-white fw-bold">
                            <i class="fas fa-credit-card text-primary me-2"></i>Payment Method
                        </div>
                        <div class="card-body">
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="radio" name="paymentMethod" id="card" value="CARD"
                                    checked>
                                <label class="form-check-label" for="card">
                                    Credit / Debit Card
                                </label>
                            </div>
                            <div class="form-check mb-3">
                                <input class="form-check-input" type="radio" name="paymentMethod" id="upi" value="UPI">
                                <label class="form-check-label" for="upi">
                                    UPI
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="paymentMethod" id="cod" value="COD">
                                <label class="form-check-label" for="cod">
                                    Cash on Delivery
                                </label>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary btn-lg w-100 rounded-pill">Place Order</button>
                </form>
            </div>

            <!-- Order Summary -->
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header bg-white fw-bold">
                        Order Summary
                    </div>
                    <div class="card-body">
                        <ul class="list-group list-group-flush mb-3">
                            <li class="list-group-item d-flex justify-content-between lh-sm"
                                th:each="item : ${cart.items}">
                                <div>
                                    <h6 class="my-0" th:text="${item.furnitureName}">Product name</h6>
                                    <small class="text-muted"
                                        th:text="${'Qty: ' + item.quantity + ' | ' + item.rentalPeriodMonths + ' months'}">Qty:
                                        1</small>
                                </div>
                                <span class="text-muted"
                                    th:text="${'$' + (item.pricePerMonth * item.quantity * item.rentalPeriodMonths)}">$120</span>
                            </li>
                        </ul>
                        <li class="list-group-item d-flex justify-content-between">
                            <span>Subtotal</span>
                            <span th:text="${'$' + cart.totalPrice}">$500</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between">
                            <span>Tax (5%)</span>
                            <span th:text="${'$' + (cart.totalPrice * 0.05)}">$25</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between"
                            style="border-top: 2px solid #eee; padding-top: 15px;">
                            <span class="fw-bold">Total (USD)</span>
                            <strong th:text="${'$' + (cart.totalPrice * 1.05)}">$525</strong>
                        </li>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div th:replace="~{layout :: footer}"></div>
</body>

</html>